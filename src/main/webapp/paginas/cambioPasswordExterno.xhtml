<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:s="http://jboss.org/schema/seam/taglib"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="/layout/template.xhtml">

	<ui:define name="page-header">
		<h1>
			<h:outputText value="#{messages['menu.acceso.credenciales']}" />
		</h1>
		<h2>
			<h:outputText value="#{messages['login.nuevopass.title']}" />
		</h2>
	</ui:define>
	<ui:define name="body">
		<h:form id="formConfirm">
			<p:confirmDialog id="confirm" global="true" showEffect="fade" hideEffect="fade" >
	   			<p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
				<p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
			</p:confirmDialog>
		</h:form>

		<p:panel>
			<h:form id="formCambioPass">
				<div class="p-grid">
					<div class="p-col-12 p-md-3">
						<p:outputLabel value="#{messages['login.correo']}" />
						<br/>
						<h:outputText value="#{identity.usuarioConectado.email}" />
					</div>
				</div>
				<div class="p-grid">
					<div class="p-col-12 p-md-3">
						<p:outputLabel for="passwordViejo" value="#{messages['login.nuevopass.passwordviejo']}:" />
						<p:password id="passwordViejo" value="#{cambioPasswordExterno.passwordViejo}" required="true" maxlength="20"/>
					</div>
				</div>
				<div class="p-grid">
					<div class="p-col-12 p-md-3">
						<p:outputLabel for="password1" value="#{messages['login.nuevopass.password1']}:" />
						<p:password id="password1" value="#{cambioPasswordExterno.password1}" required="true" maxlength="20" validatorMessage="#{messages['login.nuevopass.longitud.minima']}">
							<f:validateLength minimum="8"/>
						</p:password>
						<p:message for="password1" />	
					</div>
					<div class="p-col-12 p-md-3">
						<p:outputLabel for="password2" value="#{messages['login.nuevopass.password2']}:" />
						<p:password id="password2" value="#{cambioPasswordExterno.password2}" required="true" maxlength="20" validatorMessage="#{messages['login.nuevopass.longitud.minima']}">
							<f:validateLength minimum="8"/>
						</p:password>
						<p:message for="password2" />	
					</div>
				</div>
				<br/>	
				<div class="p-grid">
					<div class="p-col-6 p-md-2">
						<p:commandButton action="#{cambioPasswordExterno.restablecerPassword}" value="#{messages['login.nuevopass.button']}" icon="fa fa-refresh" ajax="true" process="@form" update="@form, :messages">
							<p:confirm header="#{messages['login.nuevopass.confirm.title']}" message="#{messages['login.nuevopass.confirm.message']}"  icon="ui-icon-alert"/>
						</p:commandButton>	
					</div>
				</div>
			</h:form>
		</p:panel>						
	</ui:define>
</ui:composition>

</html>